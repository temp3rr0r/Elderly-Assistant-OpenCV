import cv2

#calculate the average brightness of an image
#used to work out if its night time and turn the alarms off
def getBrightness(img):
	
	#roi = cv2.imread(img)
TH_8U,1)
	#val = cv2.createImage(cv2.GetSize(img), cv2.IPL_DEPTH_8U,1)
	#test = cv2.cloneImage(img)
	#cv2.cvtColor(img,test, cv2.CV_BGR2HSV)
 	#cv2.split(img, hue, sat,val,None)
	#hue, sat, val, test = cv2.split(img, -1)
	
	img2 = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
  	
	hue, sat, val = cv2.split(img)

  	#return cv2.avg(val)[0]
	return val[0]

def main():
	
        cap = cv2.VideoCapture(-1) # Load default video capture device
	ret, frame = cap.read() # Load one frame from capture device
	
	cv2.imwrite('border3.png',frame) # Store frame as png
	
	image = cv2.imread('border3.png', cv2.IMREAD_UNCHANGED)
	print("Brightness: " + str(getBrightness(image)))# TODO: test get brightness


	cap.release()
	cv2.destroyAllWindows()

main()
